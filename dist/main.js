(()=>{"use strict";class e{maxHp;atk;hp;constructor(e,t){this.maxHp=e,this.atk=t,this.hp=this.maxHp}getRatio=()=>{const e=this.hp/this.maxHp*100;return Math.max(0,Math.ceil(e))};attack=async e=>{e.hp=Math.max(0,e.hp-this.atk)}}class t extends e{constructor(){super(3776,200)}getName=()=>"Fuji";getPath=()=>"./dist/datasets/Fuji.png"}const n=[new t,new t,new t,new t,new t,new t,new t];class a{winner;page;constructor(e){this.winner=e,this.page=document.createElement("div"),this.appendIcon()}show=()=>document.body.appendChild(this.page);appendIcon=()=>{const e=document.createElement("button");e.className="fill next result-icon",e.addEventListener("click",(()=>{document.body.removeChild(this.page),(new c).show()}));const t=document.createElement("div");t.className="result-name",t.textContent=`WINNER: ${this.winner.getName()}`;const n=document.createElement("img");n.src=this.winner.getPath(),n.className="result-image",e.appendChild(t),e.appendChild(n),this.page.appendChild(e)}}class s{p1;p2;page;now=99;constructor(e,t){this.p1=e,this.p2=t,this.page=document.createElement("div"),this.appendHeader();const n=document.createElement("canvas");n.className="fill",this.page.appendChild(n)}show=()=>{document.body.appendChild(this.page);const e=setInterval((()=>{this.now=this.now-1,this.page.querySelector(".fighting-timer").textContent=this.now.toString(),this.now<=0&&(clearInterval(e),document.body.removeChild(this.page),new a(this.p1.getRatio()>this.p2.getRatio()?this.p1:this.p2).show())}),1e3)};appendHeader=()=>{const e=document.createElement("div");e.className="fighting-header";const t=document.createElement("div");t.className="fighting-bar",t.appendChild(this.createHpBar(this.p1.getName())),t.appendChild(this.createTimer()),t.appendChild(this.createHpBar(this.p2.getName())),e.appendChild(t),this.page.appendChild(e)};createHpBar=e=>{const t=document.createElement("div");t.style.width="45%";const n=document.createElement("div");n.style.backgroundColor="red";const a=document.createElement("div");a.style.backgroundColor="yellow",a.style.height="50%";const s=document.createElement("div");return s.textContent=e,s.style.height="50%",n.appendChild(a),t.appendChild(n),t.appendChild(s),t};createTimer=()=>{const e=document.createElement("p");return e.className="fighting-timer",e.textContent=this.now.toString(),e}}class i{page;constructor(){this.page=document.createElement("div"),this.appendIcon()}show=()=>document.body.appendChild(this.page);appendIcon=()=>{const e=[];n.forEach(((t,n)=>{const a=document.createElement("button");a.className="next selection-icon",a.addEventListener("click",(()=>{a.disabled=!0,a.style.backgroundColor="red",e.push(t),2===e.length&&(document.body.removeChild(this.page),new s(e[0],e[1]).show())}));const i=document.createElement("div");i.className="selection-name",i.textContent=t.getName();const c=document.createElement("img");c.src=t.getPath(),c.className="selection-image",a.appendChild(i),a.appendChild(c),this.page.appendChild(a)}))}}class c{page;constructor(){this.page=document.createElement("div");const e=this.shuffle();[{x:"0",y:"0"},{x:"0",y:"50%"},{x:"50%",y:"0"},{x:"50%",y:"50%"}].forEach(((t,n)=>this.appendImage(e[n],t.y,t.x))),this.appendButton()}show=()=>document.body.appendChild(this.page);shuffle=()=>{const e=[];let t=4;for(;t;){const a=Math.floor(Math.random()*n.length);e.includes(a)||(e.push(a),t--)}return e.map((e=>n[e].getPath()))};appendImage=(e,t,n)=>{const a=document.createElement("img");a.src=e,a.className="title-image",a.style.bottom=t,a.style.left=n,this.page.appendChild(a)};appendButton=()=>{const e=document.createElement("button");e.className="fill next title-next",e.addEventListener("click",(()=>{document.body.removeChild(this.page),(new i).show()}));const t=document.createElement("p");t.className="title-text",t.textContent="M7 Summit",e.appendChild(t),this.page.appendChild(e)}}(new c).show()})();