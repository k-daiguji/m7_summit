(()=>{"use strict";class t{maxHp;atk;speed;canAttack=!0;hp;constructor(t,e){this.maxHp=t,this.atk=e,this.speed=.4*this.maxHp,this.hp=this.maxHp}reset=()=>{this.hp=this.maxHp};getRatio=()=>{const t=this.hp/this.maxHp*100;return Math.max(0,Math.ceil(t))};attack=async t=>{this.canAttack&&(t.hp=Math.max(0,t.hp-this.atk),this.canAttack=!1,setTimeout((()=>{this.canAttack=!0}),this.speed))}}const e=[new class extends t{constructor(){super(8849,200)}getName=()=>"Everest";getPath=()=>"./dist/datasets/Everest.png";getHeight=()=>"88%"},new class extends t{constructor(){super(8611,180)}getName=()=>"K2";getPath=()=>"./dist/datasets/K2.png";getHeight=()=>"86%"},new class extends t{constructor(){super(5895,160)}getName=()=>"Kilimanjaro";getPath=()=>"./dist/datasets/Kilimanjaro.png";getHeight=()=>"58%"},new class extends t{constructor(){super(4478,150)}getName=()=>"Matterhorn";getPath=()=>"./dist/datasets/Matterhorn.png";getHeight=()=>"44%"},new class extends t{constructor(){super(6960,170)}getName=()=>"Aconcagua";getPath=()=>"./dist/datasets/Aconcagua.png";getHeight=()=>"69%"},new class extends t{constructor(){super(3776,200)}getName=()=>"Fuji";getPath=()=>"./dist/datasets/Fuji.png";getHeight=()=>"37%"},new class extends t{constructor(){super(1247,200)}getName=()=>"Kilauea";getPath=()=>"./dist/datasets/Kilauea.png";getHeight=()=>"12%"}];class s{winner;page;constructor(t){this.winner=t,this.page=document.createElement("div"),this.appendIcon()}show=()=>document.body.appendChild(this.page);appendIcon=()=>{const t=document.createElement("button");t.className="fill next result-icon",t.addEventListener("click",(()=>{document.body.removeChild(this.page),(new i).show()}));const e=document.createElement("div");e.className="result-name",e.textContent=`WINNER: ${this.winner.getName()}`;const s=document.createElement("img");s.src=this.winner.getPath(),s.className="image result-image",t.appendChild(e),t.appendChild(s),this.page.appendChild(t)}}class a{p1;p2;moveMap=new Map([["Left",-1],["ArrowLeft",-1],["Right",1],["ArrowRight",1]]);page;now=99;p1Element=void 0;p2Element=void 0;p1HpBar=void 0;p2HpBar=void 0;id=void 0;constructor(t,e){this.p1=t,this.p2=e,this.p1.reset(),this.p2.reset(),this.page=document.createElement("div"),this.appendStage(),this.appendHeader(),this.appendCharacters()}show=()=>{document.body.appendChild(this.page),document.body.onkeydown=t=>this.keydown(t),this.id=setInterval((()=>{this.now=this.now-1,this.page.querySelector(".fighting-timer").textContent=this.now.toString(),this.p2.attack(this.p1),0===this.p1.getRatio()&&this.finish(),this.p1HpBar.style.width=`${this.p1.getRatio()}%`,this.now<=0&&this.finish()}),1e3)};finish=()=>{clearInterval(this.id),document.body.onkeydown=()=>{},document.body.removeChild(this.page),new s(this.p1.getRatio()>this.p2.getRatio()?this.p1:this.p2).show()};appendHeader=()=>{const t=document.createElement("div");t.className="fighting-header";const e=document.createElement("div");e.className="fighting-bar",e.appendChild(this.createHpBar(this.p1.getName())),e.appendChild(this.createTimer()),e.appendChild(this.createHpBar(this.p2.getName())),t.appendChild(e),this.page.appendChild(t)};createHpBar=t=>{const e=document.createElement("div");e.style.width="45%";const s=document.createElement("div");s.style.backgroundColor="red";const a=document.createElement("div");a.style.backgroundColor="yellow",a.style.height="50%",this.p1HpBar?this.p2HpBar=a:this.p1HpBar=a;const n=document.createElement("div");return n.textContent=t,n.style.color="orange",n.style.height="50%",s.appendChild(a),e.appendChild(s),e.appendChild(n),e};createTimer=()=>{const t=document.createElement("p");return t.className="fighting-timer",t.textContent=this.now.toString(),t};appendStage=()=>{const t=document.createElement("img");t.className="fill image",t.style.position="absolute",t.src="./dist/datasets/NightSky.png",this.page.appendChild(t)};appendCharacters=()=>{this.p1Element=this.createCharacter(this.p1.getPath(),this.p1.getHeight(),"image fighting-p1"),this.page.appendChild(this.p1Element),this.p2Element=this.createCharacter(this.p2.getPath(),this.p2.getHeight(),"image fighting-p2"),this.page.appendChild(this.p2Element)};createCharacter=(t,e,s)=>{const a=document.createElement("img");return a.className=s,a.style.height=e,a.src=t,a};keydown=t=>{const e=Number(this.p1Element.style.left.replace(/[^0-9]/g,"")),s=this.moveMap.get(t.key)??0;this.p1Element.style.left=`${Math.min(20,Math.max(0,e+s))}%`,"a"===t.key&&(this.p1.attack(this.p2),0===this.p2.getRatio()&&this.finish(),this.p2HpBar.style.width=`${this.p2.getRatio()}%`)}}class n{page;constructor(){this.page=document.createElement("div"),this.appendIcon()}show=()=>document.body.appendChild(this.page);appendIcon=()=>{const t=[];e.forEach(((e,s)=>{const n=document.createElement("button");n.className="next selection-icon",n.addEventListener("click",(()=>{n.disabled=!0,n.style.backgroundColor="red",t.push(e),2===t.length&&(document.body.removeChild(this.page),new a(t[0],t[1]).show())}));const i=document.createElement("div");i.className="selection-name",i.textContent=e.getName();const h=document.createElement("img");h.src=e.getPath(),h.className="image selection-image",n.appendChild(i),n.appendChild(h),this.page.appendChild(n)}))}}class i{page;constructor(){this.page=document.createElement("div");const t=this.shuffle();[{x:"0",y:"0"},{x:"0",y:"50%"},{x:"50%",y:"0"},{x:"50%",y:"50%"}].forEach(((e,s)=>this.appendImage(t[s],e.y,e.x))),this.appendButton()}show=()=>document.body.appendChild(this.page);shuffle=()=>{const t=[];let s=4;for(;s;){const a=Math.floor(Math.random()*e.length);t.includes(a)||(t.push(a),s--)}return t.map((t=>e[t].getPath()))};appendImage=(t,e,s)=>{const a=document.createElement("img");a.src=t,a.className="image title-image",a.style.bottom=e,a.style.left=s,this.page.appendChild(a)};appendButton=()=>{const t=document.createElement("button");t.className="fill next title-next",t.addEventListener("click",(()=>{document.body.removeChild(this.page),(new n).show()}));const e=document.createElement("p");e.className="title-text",e.textContent="M7 Summit",t.appendChild(e),this.page.appendChild(t)}}(new i).show()})();